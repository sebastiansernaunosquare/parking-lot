<div class="card shadow-sm border-0">
  <div
    class="card-header bg-white py-3 d-flex justify-content-between align-items-center"
  >
    <h5 class="mb-0 text-secondary">
      <i class="bi bi-people-fill me-2"></i>User Management
    </h5>
    <button class="btn btn-primary btn-sm fw-bold" (click)="register.emit()">
      <i class="bi bi-person-plus-fill me-1"></i> New Resident
    </button>
  </div>

  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead class="table-light">
        <tr>
          <th scope="col" class="ps-4">ID</th>
          <th scope="col">Name</th>
          <th scope="col">Email</th>
          <th scope="col">Role</th>
          <th scope="col" class="text-end pe-4">Actions</th>
        </tr>
      </thead>
      <tbody>
        @for (user of users(); track user.id) {
        <tr>
          <td class="ps-4 text-muted small">#{{ user.id }}</td>

          <td class="fw-bold text-dark">{{ user.name }}</td>

          <td class="text-secondary">{{ user.email }}</td>

          <td>
            <span
              class="badge rounded-pill border"
              [ngClass]="roleBadges[user.role] || defaultBadge"
            >
              {{ user.role | titlecase }}
            </span>
          </td>

          <td class="text-end pe-4">
            <div class="btn-group" role="group">
              <button
                type="button"
                class="btn btn-sm btn-outline-secondary"
                title="Edit User"
                (click)="edit.emit(user)"
              >
                <i class="bi bi-pencil-square"></i>
              </button>
              <button
                type="button"
                class="btn btn-sm btn-outline-danger"
                title="Delete User"
                (click)="delete.emit(user.id)"
              >
                <i class="bi bi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
        } @empty {
        <tr>
          <td colspan="5" class="text-center py-5 text-muted">
            <i class="bi bi-inbox fs-1 d-block mb-2"></i>
            No users found. Click "New Resident" to add one.
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <div class="card-footer bg-white border-top-0 py-3 text-muted small">
    Showing {{ users().length }} users
  </div>
</div>
